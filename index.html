<!DOCTYPE html>
<html>
<head>
    <title>Employee ID Card Generator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>

    <style>
        body {
            font-family: Arial, sans-serif;
            /* background-image: url('gif.gif');
            background-repeat: no-repeat;
            background-size: cover; */

            background-color: whitesmoke;
        }

        form {
            max-width: 400px;
            margin: 0 auto;
            padding: 20px;
            background-color:white;
            /* background-image: url('gif.gif');
            background-repeat: no-repeat;
            background-size: cover; */
            border-radius: 25px;
            height: 600px;
        }

        form label {
            display: block;
            margin-bottom: 5px;
            color: black;
            font-weight: bold; 
        }

        form input[type="text"],
        form input[type="file"] {
            width: 90%;
            padding: 8px;
            margin-bottom: 10px;
            border-top-right-radius: 50px;
            border-bottom-right-radius: 50px;
            border-top-left-radius: 50px;
            border-bottom-left-radius: 50px;
            border: 1px solid #ccc;
            color: black;
            font-weight: bold;
        }

        form button[type="submit"] {
            padding: 10px 20px;
            background-color: green;
            color: #fff;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }

        #id-card-container {
            display: none;
            justify-content: center;
            align-items: center;
            margin-top: 20px;
            
        }

        .id-card {
            /* background-image: url('pk.jpg');
            background-repeat: no-repeat;
            background-size: cover; */
            background-color: white;
            border: 1px solid black;
            width: 300px;
            /* background-color: transparent; */
            padding: 20px;
            border-radius: 0px;
            height: 430px;
            border-color: #0e0e0f;
        }

        .id-card img#photo-preview {
            width: 120px;
            border-radius: 0px;
            margin-bottom: 10px;
            height: 120px;
            border: 1px solid black;
        }

        .id-card h2,
        .id-card p {
            margin: 0;
            font-size: 16px;
            line-height: 1.5;
            font-weight: bold;
        }

        .id-card p:not(:last-child) {
            margin-bottom: 5px;
        }

        #qr-code {
            width: 70px;
            height: 70px;
            /* margin: 10px auto; */
            display: block;
        }

        #download-link {
            display: block;
            text-align: center;
            margin-top: 20px;
            visibility: hidden;
        }

        /* .navbar {
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .navbar img {
            margin-right: 10px;
        }

        .navbar h4 {
            margin: 0;
        } */

        #para {
            font-size: 12px;
            color: black;
            margin-bottom: 0;
            text-align: center;
        }
        #designation-preview {
    text-align: center;
    color: navy; /* Add this line to change the color to navy */
}

        @media (max-width: 480px) {
            form {
                padding: 10px;
            }

            .photo-preview {
                max-width: 100px;
                max-height: 100px;
            }

            .id-card {
                padding: 10px;
            }

            .id-card .qr-code {
                max-width: 50px;
            }
        }
    </style>
</head>
<body>
    <marquee behavior="scroll" direction="left">
        <strong style="color: red;"> * Important Notice:</strong>
        Please enter the details in the form, click on "Generate ID Card," and ensure that each field contains a maximum of 20 characters.
    </marquee>  
    
    <h1 style="color: black; text-align: center;">  <i>  Serole Employee Registration</i></h1>
    <form id="employee-form">
    
        <label for="name"><i class="fa fa-user"></i> Name:</label>
        <input type="text" id="name" maxlength="20" required><br>
        <label for="designation"><i class="fa fa-desktop"></i> Designation:</label>
        <input type="text" id="designation" maxlength="20" required><br>
    
        <label for="employee-id"><i class="fa fa-id-card"></i> Employee ID:</label>
        <input type="text" id="employee-id"  maxlength="20" required><br>
    
         
        <label for="number"><i class="fa fa-phone"></i> Number:</label>
        <input type="text" id="number" maxlength="10" required><br>
    
        <label for="address"><i class="fa fa-envelope"></i> Email Id:</label>
        <input type="text" id="address"  maxlength="30" required><br>
    
        <!-- <label for="date"><i class="fa fa-calendar"></i> Date:</label>
        <input style="border-radius: 25px; width: 90%; padding: 8px; margin-bottom: 10px; border-color: #0e0e0f;"  type="date" id="date" required><br>
        <br> -->
        <label for="photo"><i class="fa fa-camera"></i> Photo:</label>
        <input style="background-color: #fff; color: #0e0e0f;" type="file" id="photo" accept="image/*" required><br>
        <br>
        <button type="submit"> Generate ID Card</button>
    </form>

    <div id="id-card-container" >
        <div class="id-card">
            <!-- <div style="display: flex; justify-content: center; "> -->
              <div style="display: flex;"> <div><img src="serole-new-logo1.png" alt="" width="150px" height="50px"> </div> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
               <div> <img id="qr-code" src="" alt="QR Code" style="height: 70px; width: 70px; ; "> </div></div>
                <hr style=" border-top: 1px solid black;">

            <!-- </div> -->
            <center>
                <img id="photo-preview" src="" alt="Employee Photo">
                <h2 id="name-preview"></h2>
                <p id="designation-preview"></p>
            </center>
            
            <p id="employee-id-preview"></p>
            <p id="number-preview"></p>
            <!-- <p id="address-preview"></p> -->
            <!-- <p id="date-preview"></p> -->
            <div>
                
               <p style="background-color: #39A7FF; color: white; font-size: 11px;">SEROLE INFO TECHNOLOGIES INDIAPVTLTD</p>
                <p id="para">Level 2,IT Hub, Yellandu Cross Road, Kaviraj Nagar, Khammam, Telangana 507002</p>
                <a id="download-link" href="#"  download="Employee-id-card.png"> <button style=" padding: 10px 20px;
                    background-color: green;
                    color: #fff;
                    border: none;
                    border-radius: 10px;">Download</button></a>
            </div>
        </div>
    </div>

    <!-- Include the dom-to-image library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.min.js"></script>

    <script>
        document.getElementById("employee-form").addEventListener("submit", function (event) {
            event.preventDefault();

            // Fetching form values
            var name = document.getElementById("name").value;
            var employeeId = document.getElementById("employee-id").value;
            var designation = document.getElementById("designation").value; // Modified variable name
            var number = document.getElementById("number").value;
           // var address = document.getElementById("address").value;
            // var startDate = new Date(document.getElementById("date").value);
            // var endDate = new Date(startDate.getTime());
            // endDate.setMonth(endDate.getMonth() + 24);

            // // Format the end date as "dd/mon/yyyy"
            // var endDateFormatOptions = { day: "2-digit", month: "short", year: "numeric" };
            // var formattedEndDate = endDate.toLocaleDateString("en-US", endDateFormatOptions);

            var photo = document.getElementById("photo").files[0];

            // Displaying form values on ID card-------++
            document.getElementById("photo-preview").src = URL.createObjectURL(photo);
            document.getElementById("name-preview").innerText = name;
            document.getElementById("designation-preview").innerText =designation;
            document.getElementById("employee-id-preview").innerText = "Associate ID:" + employeeId;
            document.getElementById("number-preview").innerText = "Emergency Contact:" + number;
            //document.getElementById("address-preview").innerText = "Email Id: " + address;
            // document.getElementById("date-preview").innerText = "Valid Until: " + formattedEndDate;

            // Generate and display QR code
            var qrCodeData =
                "Organization: Serole Khammam\n" +
                "Name: " + name + "\n" +
                "Designation: " + designation + "\n" + 
                "Employee ID: " + employeeId + "\n" +
                "Number: " + number + "\n" ;
                
            var qrCodeUrl = "https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=" + encodeURIComponent(qrCodeData);
            // console.log (qrCodeUrl);
            document.getElementById("qr-code").src = qrCodeUrl;

            // Show/hide the form and ID card container
            var form = document.getElementById("employee-form");
            var idCardContainer = document.getElementById("id-card-container");
            form.style.display = "none";
            idCardContainer.style.display = "flex";

            // Scroll to the ID card container
            idCardContainer.scrollIntoView({ behavior: "smooth" });

            // Convert the ID card container to an image and provide download link
            domtoimage.toPng(idCardContainer)
                .then(function (dataUrl) {
                    var downloadLink = document.getElementById("download-link");
                    downloadLink.href = dataUrl;
                    downloadLink.style.visibility = "visible";
                })
                .catch(function (error) {
                    console.error("Error generating ID card image: ", error);
                });
        });
    </script>
</body>
</html>
